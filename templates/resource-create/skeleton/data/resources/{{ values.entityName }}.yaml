apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: {{ values.entityName }}
  {% if values.title %}title: {{ values.title | dump }}{% endif %}
  {% if values.description %}description: {{ values.description | dump }}{% endif %}
  {% if values.tags and values.tags.length > 0 %}
  tags:
  {% for t in values.tags %}- {{ t | dump }}
  {% endfor %}
  {% endif %}
  {% set ann = {} %}
  {% if values.technology %}{% set _ = ann.__setitem__('technology', values.technology) %}{% endif %}
  {% if values.version %}{% set _ = ann.__setitem__('version', values.version) %}{% endif %}

  {% if ann and (ann | length) > 0 %}
  annotations:
  {% for k, v in ann %}
    {{ k }}: {{ v | dump }}
  {% endfor %}
  {% endif %}
spec:
  type: {{ values.resourceType | dump }}
  owner: {{ values.owner | dump }}